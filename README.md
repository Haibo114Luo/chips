# ♠️ 德州扑克局域网记分系统 (Texas Hold'em LAN Chip Manager)

这是一个基于 Python 和 Web 技术的轻量级局域网德州扑克记分系统。它旨在替代实体筹码，让所有玩家通过手机或电脑浏览器实时连接，进行下注、结算和底池统计。

**核心功能：**

* **无需实体筹码**：数字化管理每位玩家的余额。
* **实时同步**：所有玩家的操作（下注、赢输）会实时更新到底池和排行榜。
* **多端支持**：支持 iOS、Android、Windows、Mac 等任何带有浏览器的设备。
* **一键部署**：通过批处理脚本自动获取本机 IP 并启动所有服务。

---

## 📂 文件结构

* `data.py`: **核心后端** (端口 5000)，负责处理游戏逻辑和数据库存储 (SQLite)。
* `proxy.py`: **代理服务** (端口 8001)，处理跨域请求，转发前端指令到后端。
* `index.html`: **前端页面** ，玩家操作界面。
* `PC_launch.bat`: **启动脚本**，一键启动 Web 服务器、后端和代理服务。
* `config.json`: **配置文件**，由启动脚本自动生成，包含服务器 IP。
* `pip_install.bat`: **环境配置脚本**，自动下载所需要的依赖，默认python已经装好。

---

## 🛠️ 环境准备

在运行之前，请确保你的电脑（作为服务器的主机）已安装 Python 环境。

### 1. 安装 Python

如果你还没有安装 Python，请前往 [Python 官网](https://www.python.org/) 下载并安装。

> **注意**：安装时请务必勾选 **"Add Python to PATH"**。

### 2. 安装依赖库

打开命令行（CMD 或 PowerShell），运行以下命令安装必要的第三方库：

```bash
pip install flask flask-sqlalchemy flask-cors requests

```

---

## 🚀 如何运行

### 第一步：准备依赖

第一次运行之前，如果没有安装依赖库，双击运行文件夹中的 **`pip_install.bat`**。

### 第二步：启动服务

双击运行文件夹中的 **`PC_launch.bat`**。

* 脚本会自动检测你的局域网 IP 地址。
* 脚本会生成 `config.json` 配置文件。
* 脚本会启动三个黑色的命令行窗口（Web Server, Backend, Proxy）。**请勿关闭这些窗口**，否则游戏会中断。

### 第三步：玩家加入

启动成功后，主窗口会显示如下信息：

```text
Please open this URL in your browser:
http://192.168.xx.xx:8000

```

* **主机（你）**：直接在浏览器访问该地址。
* **其他玩家**：确保手机连接到**同一个 Wi-Fi**，然后在手机浏览器输入上述地址（例如 `192.168.1.5:8000`）。

---

## 🎮 游戏操作指南

### 1. 注册 (Register)

* 进入页面后，输入 **用户名** 和 **起始筹码**（例如 200）。
* 点击“开始游戏”。

### 2. 下注 (Betting)

* **数字键盘**：输入你要下注的金额。
* **`+` 按钮**：确认加注。
* *例如：输入 10 -> 点 `+` -> 当前下注增加 10。*


* **屏幕显示**：
* 主数字：你这一手动作的下注额。
* 括号内数字 `(xxx)`：你本局累计下注的总额。


* **底池 (Pot)**：屏幕顶部会自动显示所有玩家当前的下注总和。

### 3. 结算 (Settlement)

一局结束后，胜者和负者需要进行操作：

* **赢家**：点击 **`赢` (Win)** 按钮。系统会将底池里的筹码加到你的余额中，并清空本局下注。
* **输家**：点击 **`输` (Lose)** 按钮。系统会从你的余额中扣除本局下注额。
* **重置**：如果输错数字，可点击 `重置` 按钮重新输入。

### 4. 查看账单

点击左上角的 **`☰`** 菜单按钮，可以查看所有玩家当前的实时余额。

菜单栏目内还附有一张展示德州扑克牌型大小的图片以供下注时参考。

---

## ⚠️ 常见问题 (FAQ)

**Q: 手机无法访问网页？**

* 检查手机和电脑是否连接在**同一个 Wi-Fi** 下。
* 检查电脑的**防火墙**设置。尝试临时关闭防火墙，或允许 Python 程序通过防火墙。

**Q: 点击“开始游戏”没反应？**

* 检查名为 `Proxy Server` 或 `Game Backend` 的黑色窗口是否意外关闭。
* 如果是第一次运行，请确认是否已运行 `pip install ...` 安装了所有依赖。

**Q: 为什么显示 404 Not Found？**

* 请确认你访问的是端口 **8000** (Web)，而不是 5000 或 8001。

---

## 📝 开发者说明

本项目后端使用 Flask，数据库采用 SQLite。

* 如果要清空所有历史数据（重置游戏），可在侧边菜单中点击“清空数据”，或直接删除目录下的 `game_data.db` 文件。
